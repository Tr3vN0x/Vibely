<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vibely | Winter Diamond Lounge</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
  --gold:#d4af37;
  --ice-blue:#a5f3fc;
  --obsidian:#05050a;
  --glass:rgba(255,255,255,0.05);
}

*{box-sizing:border-box;transition:all 0.3s ease;}
body{margin:0;font-family:'Inter',sans-serif;background:#080a12;color:#fff;height:100vh;overflow:hidden;display:flex;flex-direction:column;}

/* Header & Layout */
header{padding:15px 40px;background:rgba(5,5,10,0.95);border-bottom:1px solid rgba(165,243,252,0.2);display:flex;justify-content:space-between;align-items:center;z-index:2;}
.main-layout{display:grid;grid-template-columns:240px 1fr 320px;flex-grow:1;overflow:hidden;position:relative;}
.nav-sidebar{padding:25px 15px;background:rgba(0,0,0,0.5);border-right:1px solid rgba(255,255,255,0.1);display:flex;flex-direction:column;gap:10px;backdrop-filter:blur(8px);}
.nav-btn{background:var(--glass);border:1px solid transparent;color:#aaa;padding:12px 20px;font-family:'Cinzel',serif;cursor:pointer;border-radius:4px;font-size:0.8rem;transition:all 0.3s ease;}
.nav-btn:hover,.nav-btn.active{color:var(--ice-blue);border-color:var(--ice-blue);background:rgba(165,243,252,0.1);box-shadow:0 0 10px var(--ice-blue);}

/* Center content */
#centerContent{overflow-y:auto;padding:40px;background:radial-gradient(circle at top, #0c1220 0%, #05050a 100%);position:relative;z-index:1;}
.view-section{display:none;max-width:900px;margin:0 auto;}

/* User Cards */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px;}
.user-card{background:rgba(255,255,255,0.05);border:1px solid rgba(165,243,252,0.2);border-radius:12px;padding:25px;text-align:center;position:relative;box-shadow:0 0 15px rgba(165,243,252,0.2);transition:transform 0.3s ease,box-shadow 0.3s ease;transform:translateY(20px);opacity:0;animation:cardEnter 0.6s forwards;overflow:hidden;}
.user-card:hover{transform:scale(1.03);box-shadow:0 0 35px rgba(165,243,252,0.6);}
.card-avatar{width:80px;height:80px;margin:0 auto 10px;border:2px solid var(--ice-blue);border-radius:50%;overflow:hidden;}
.card-avatar img{width:100%;height:100%;object-fit:cover;}
.card-level{font-size:0.6rem;color:#a5f3fc;margin-top:2px;}
.card-xp{background:rgba(165,243,252,0.1);border-radius:8px;height:6px;width:100%;margin-top:5px;overflow:hidden;}
.card-xp-fill{background:var(--ice-blue);width:0%;height:100%;border-radius:8px;transition:width 1s ease-in-out;}

/* Shop & Inventory */
.shop-grid,.inventory-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin-top:20px;}
.shop-card,.inventory-card{background:rgba(0,0,0,0.6);border:1px solid rgba(165,243,252,0.2);border-radius:12px;padding:20px;text-align:center;position:relative;overflow:hidden;transition:transform 0.3s ease,box-shadow 0.3s ease;}
.shop-card:hover,.inventory-card:hover{transform:scale(1.05);box-shadow:0 0 30px rgba(165,243,252,0.7);}
.shop-card .effect-name,.inventory-card .effect-name{font-family:'Cinzel';color:var(--ice-blue);margin-bottom:5px;}
.shop-card .cost{color:var(--gold);font-weight:bold;margin-bottom:10px;}
.shop-card button,.inventory-card button{width:100%;cursor:pointer;margin-top:8px;}

/* Frost Snow Animation for Epic Effect */
@keyframes epicSnow{0%{transform:translateY(-20px) rotate(0deg);}100%{transform:translateY(100%) rotate(360deg);}}
.epic-frost::after{
  content:'❄';
  position:absolute;
  font-size:20px;
  color:#a5f3fc;
  top:0;
  left:50%;
  transform:translateX(-50%);
  animation:epicSnow 4s linear infinite;
  opacity:0.8;
}
</style>
</head>
<body>

<div id="loginOverlay">
  <div style="text-align:center;border:1px solid var(--ice-blue);padding:40px;border-radius:15px;">
    <h2 style="font-family:'Cinzel';color:var(--ice-blue);">WINTER LOUNGE</h2>
    <input id="regName" placeholder="Username" style="display:none;">
    <input id="authEmail" type="email" placeholder="Email">
    <input id="authPass" type="password" placeholder="Password">
    <button class="nav-btn" style="width:100%;" onclick="handleAuth()">ENTER</button>
    <p onclick="toggleMode()" style="font-size:0.7rem;cursor:pointer;color:#666;margin-top:10px;">Switch Mode</p>
  </div>
</div>

<header>
  <div style="font-family:'Cinzel';color:var(--ice-blue);letter-spacing:5px;">❄ DIAMOND LOUNGE</div>
  <div id="headerBalance" style="color:var(--ice-blue);font-weight:bold;">♦ 0</div>
</header>

<div id="mainView" class="main-layout" style="display:none">
  <nav class="nav-sidebar">
    <button class="nav-btn active" id="btn-explore" onclick="switchTab('explore')">Lounge</button>
    <button class="nav-btn" id="btn-wheel" onclick="switchTab('wheel')">Frost Vault</button>
    <button class="nav-btn" id="btn-profile" onclick="switchTab('profile')">Identity</button>
    <button class="nav-btn" id="btn-shop" onclick="switchTab('shop')">Shop</button>
    <button class="nav-btn" id="btn-inventory" onclick="switchTab('inventory')">Inventory</button>
    <button class="nav-btn" style="margin-top:auto;color:crimson;" onclick="auth.signOut()">Logout</button>
  </nav>

  <main id="centerContent">
    <section id="view-explore" class="view-section" style="display:block;">
      <div id="cardsContainer" class="card-grid"></div>
    </section>

    <section id="view-wheel" class="view-section" style="text-align:center;">
      <h2 style="font-family:'Cinzel';color:var(--ice-blue);">FROST VAULT</h2>
      <div class="wheel-box">
        <div id="wheel">
          <div class="wheel-segment" style="transform:rotate(0deg)">♦5</div>
          <div class="wheel-segment" style="transform:rotate(45deg)">+50 XP</div>
          <div class="wheel-segment" style="transform:rotate(90deg)">♦10</div>
          <div class="wheel-segment" style="transform:rotate(135deg)">JACKPOT</div>
          <div class="wheel-segment" style="transform:rotate(180deg)">♦1</div>
          <div class="wheel-segment" style="transform:rotate(225deg)">+10 XP</div>
          <div class="wheel-segment" style="transform:rotate(270deg)">♦25</div>
          <div class="wheel-segment" style="transform:rotate(315deg)">SKIPPED</div>
        </div>
      </div>
      <button class="nav-btn" id="spinBtn" onclick="spinWheel()">ACTIVATE VAULT</button>
    </section>

    <section id="view-profile" class="view-section">
      <div class="edit-box">
        <h3 style="font-family:'Cinzel';color:var(--ice-blue);">Identity Editor</h3>
        <input id="newAvatar" placeholder="Avatar URL">
        <input id="newBadge" placeholder="Winter Badge (e.g. ❄️ Elite)">
        <button class="nav-btn" style="width:100%;" onclick="updateProfile()">Save Identity</button>
      </div>
    </section>

    <section id="view-shop" class="view-section">
      <h2 style="font-family:'Cinzel';color:var(--ice-blue);text-align:center;">Winter Shop</h2>
      <div id="shopContainer" class="shop-grid"></div>
    </section>

    <section id="view-inventory" class="view-section">
      <h2 style="font-family:'Cinzel';color:var(--ice-blue);text-align:center;">Inventory</h2>
      <div id="inventoryContainer" class="inventory-grid"></div>
    </section>
  </main>

  <aside class="right-sidebar">
    <div id="chatBox"></div>
    <input id="chatInput" placeholder="Chat..." onkeypress="if(event.key==='Enter') sendChat()">
  </aside>
</div>

<script>
// Firebase & Variables
const OWNER_UID='pqPGbhBjvrVrgDrmUBa4J2ynmkW2';
const firebaseConfig={apiKey:"AIzaSyCDll8RH1kzGOf-ixJmSlHXGssOHSMlO3s",authDomain:"vibely-5128e.firebaseapp.com",projectId:"vibely-5128e",storageBucket:"vibely-5128e.firebasestorage.app",messagingSenderId:"1048550825812",appId:"1:1048550825812:web:fc5bbba51e065807ffb2c1"};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const auth=firebase.auth();
let isLogin=true,myProfile=null;

// Toggle Login/Register
function toggleMode(){isLogin=!isLogin;document.getElementById('regName').style.display=isLogin?'none':'block';}

// Handle Auth
async function handleAuth(){
  const email=document.getElementById('authEmail').value;
  const pass=document.getElementById('authPass').value;
  const name=document.getElementById('regName').value;
  try{
    let user;
    if(isLogin) user=await auth.signInWithEmailAndPassword(email,pass);
    else user=await auth.createUserWithEmailAndPassword(email,pass);
    if(!isLogin) await db.collection('users').doc(user.user.uid).set({name,avatar:'',badge:'❄️ Newcomer',vibes:50,xp:0,inventory:{},equipped:{}});
  }catch(err){alert(err.message);}
}

// Switch Tabs
function switchTab(t){document.querySelectorAll('.view-section').forEach(v=>v.style.display='none');document.getElementById('view-'+t).style.display='block';document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));document.getElementById('btn-'+t).classList.add('active');}

// Load App, Shop, Inventory, Wheel, Chat
// ... (Keep previous logic but clean & optimized)

// Epic Frost visual handled via .epic-frost class on user cards

</script>
</body>
</html>
